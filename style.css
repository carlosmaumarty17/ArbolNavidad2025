* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: #111;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #fff;
    height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Recording state styles */
body.recording {
    pointer-events: none;
}

body.recording::before {
    content: 'ðŸ“¹ recordingâ€¦';
    position: fixed;
    z-index: 999;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    margin: auto;
    display: inline-block;
    width: 15ch;
    height: 2em;
    line-height: 2em;
    text-align: center;
    white-space: nowrap;
    color: white;
    background: rgba(0, 0, 0, 0.5);
    padding: 1em;
    border-radius: 50vh;
    font-size: 2vw;
}

body.recording canvas {
    opacity: 0.66;
}

.canvas-container {
    position: relative;
    width: 95vmin;
    height: 95vmin;
    max-width: 800px;
    max-height: 800px;
    margin: 0 auto;
}

canvas {
    width: 100%;
    height: 100%;
    display: block;
    cursor: grab;
}

canvas:active {
    cursor: grabbing;
}

/* Title and instructions overlay */
.overlay {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 10;
    background: rgba(0, 0, 0, 0.7);
    padding: 15px 20px;
    border-radius: 10px;
    max-width: 300px;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.overlay h1 {
    font-size: 1.8rem;
    margin-bottom: 10px;
    background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-weight: 600;
}

.overlay p {
    font-size: 0.9rem;
    line-height: 1.5;
    color: #aaa;
    margin-bottom: 8px;
}

.overlay ul {
    margin-left: 20px;
    margin-top: 10px;
    color: #ccc;
}

.overlay li {
    margin-bottom: 5px;
    font-size: 0.85rem;
}

/* Custom dat.GUI styling */
.dg.ac {
    z-index: 100 !important;
}

.dg.main {
    position: absolute;
    top: 20px;
    right: 20px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    max-height: 80vh;
    overflow-y: auto;
}

.dg li.title {
    font-weight: bold;
    font-size: 14px;
    line-height: 30px;
    height: 30px;
    padding-left: 10px;
    background: linear-gradient(90deg, #2c3e50, #3498db);
}

.dg .cr.function .property-name {
    width: 100%;
    text-align: center;
}

/* Loading screen */
.loading {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    transition: opacity 0.5s ease;
}

.loading.hidden {
    opacity: 0;
    pointer-events: none;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 3px solid rgba(255, 255, 255, 0.1);
    border-top-color: #4ecdc4;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* FPS counter */
.fps-counter {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.7);
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    font-family: monospace;
    z-index: 20;
}

/* Click hint */
.click-hint {
    position: absolute;
    bottom: 20px;
    left: 20px;
    background: rgba(0, 0, 0, 0.7);
    padding: 8px 12px;
    border-radius: 5px;
    font-size: 12px;
    opacity: 0.8;
    animation: pulse 2s infinite;
    z-index: 20;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 0.8;
    }

    50% {
        opacity: 0.5;
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    body {
        flex-direction: column;
        justify-content: flex-start;
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
        padding: 20px 0;
    }

    .canvas-container {
        width: 100%;
        height: 80vmin;
        /* Slightly smaller to fit better */
        max-height: 500px;
        margin: 20px 0;
        order: 2;
        /* Tree in middle */
    }

    .overlay {
        position: relative;
        top: auto;
        left: auto;
        right: auto;
        width: 90%;
        max-width: 600px;
        margin: 0 auto;
        background: rgba(0, 0, 0, 0.4);
        /* Less opaque on mobile to feel lighter */
        backdrop-filter: none;
        /* Perf on mobile */
        order: 1;
        /* Title on top */
        margin-bottom: 20px;
    }

    .overlay h1 {
        font-size: 1.5rem;
        text-align: center;
    }

    .overlay ul {
        /* display: none;  - Keep instructions visible now that they stack */
        margin-top: 5px;
        font-size: 0.8rem;
    }

    .overlay li {
        margin-bottom: 2px;
    }

    .dg.main {
        position: relative;
        top: auto;
        right: auto;
        /* Reset right positioning */
        width: 90% !important;
        /* Force width */
        margin: 20px auto;
        max-height: none;
        order: 3;
        /* Controls at bottom */
        overflow: visible;
        /* Let it expand */
    }

    /* Move the close button of dat.gui to be visible if needed, 
       though usually standard styles handle it. 
       We might want to ensure the folders are closed by default in JS for mobile, 
       but for now CSS layout fixes the overlap. */

    .fps-counter,
    .click-hint {
        display: none;
    }
}